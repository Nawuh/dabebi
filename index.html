<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my valentine?</title>
  <style>
    :root{
      --bg:#f6c8d5;
      --card:#f4f2ef;
      --text:#222;
      --muted:#777;
      --yes:#d81b60;
      --yesDark:#b5154f;
      --shadow: 0 18px 50px rgba(0,0,0,.18);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background: var(--bg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      overflow:hidden;
    }

    .card{
      width:min(760px, 92vw);
      background:var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 34px 28px 26px;
      text-align:center;
      position:relative;
    }

    .bearWrap{
      display:grid;
      place-items:center;
      margin-top:4px;
      margin-bottom: 10px;
    }
    .title{
      font-size: clamp(22px, 3.2vw, 34px);
      font-weight: 600;
      margin: 0 0 18px;
      letter-spacing: .2px;
    }

    .actions{
      display:flex;
      justify-content:center;
      align-items:center;
      gap: 36px;
      margin-top: 8px;
      position:relative;
      height: 70px; /* gives room for "No" to move */
    }

    .btn{
      border:0;
      cursor:pointer;
      font-size: 14px;
      border-radius: 999px;
      padding: 10px 18px;
      transition: transform .15s ease, background .15s ease;
      user-select:none;
    }

    .yes{
      background: var(--yes);
      color:#fff;
      box-shadow: 0 10px 20px rgba(216,27,96,.25);
      transform: scale(var(--yesScale, 1));
      min-width: 88px;
    }
    .yes:hover{ background: var(--yesDark); }
    .yes:active{ transform: scale(calc(var(--yesScale, 1) * .98)); }

    .no{
      background: transparent;
      color:#444;
      padding: 10px 16px;
      position:absolute;
      right: 26%;
      top: 50%;
      transform: translateY(-50%);
    }
    .no:hover{ text-decoration: underline; }

    .hint{
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
    }

    /* Success view */
    .successTitle{
      font-size: clamp(22px, 3.2vw, 34px);
      font-weight: 700;
      margin: 6px 0 18px;
    }
    .gif{
      width: min(320px, 70vw);
      aspect-ratio: 1/1;
      border-radius: 10px;
      object-fit: cover;
      display:block;
      margin: 0 auto 6px;
      box-shadow: 0 14px 32px rgba(0,0,0,.18);
      background:#ddd;
    }

    /* Confetti */
    .confetti{
      position:absolute;
      inset:-10px;
      pointer-events:none;
      overflow:hidden;
      border-radius: var(--radius);
    }
    .piece{
      position:absolute;
      width: 10px;
      height: 14px;
      opacity: .9;
      top:-20px;
      animation: fall linear forwards;
      transform: rotate(0deg);
      border-radius: 2px;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.08));
    }
    @keyframes fall{
      to{
        transform: translateY(520px) rotate(720deg);
      }
    }

    /* Tiny sparkle background dots like in the video */
    .sparkleDots::before{
      content:"";
      position:absolute;
      inset: 0;
      background-image:
        radial-gradient(rgba(0,0,0,.08) 1px, transparent 1px);
      background-size: 18px 18px;
      opacity: .25;
      border-radius: var(--radius);
      pointer-events:none;
      display:none;
    }
    .sparkleDots.on::before{ display:block; }
  </style>
</head>
<body>
  <main class="card sparkleDots" id="card">
    <div class="bearWrap" aria-hidden="true">
      <!-- Simple bear + heart SVG (close to the vibe in the video) -->
      <svg width="88" height="64" viewBox="0 0 220 160" fill="none">
        <defs>
          <filter id="s" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="rgba(0,0,0,.15)"/>
          </filter>
        </defs>

        <!-- Heart -->
        <path d="M185 40c-10-18-35-18-45 0-10-18-35-18-45 0-12 22 16 46 45 66 29-20 57-44 45-66Z"
              fill="#ff4d6d" filter="url(#s)" opacity=".95"/>

        <!-- Bear head -->
        <circle cx="95" cy="86" r="54" fill="#f4b183" filter="url(#s)"/>
        <circle cx="55" cy="60" r="18" fill="#f4b183"/>
        <circle cx="135" cy="60" r="18" fill="#f4b183"/>
        <circle cx="55" cy="60" r="9" fill="#e79b66" opacity=".9"/>
        <circle cx="135" cy="60" r="9" fill="#e79b66" opacity=".9"/>

        <!-- Face -->
        <circle cx="80" cy="84" r="6" fill="#222"/>
        <circle cx="110" cy="84" r="6" fill="#222"/>
        <circle cx="95" cy="102" r="9" fill="#e78aa0" opacity=".95"/>
      </svg>
    </div>

    <h1 class="title" id="question">Da bebi....will you be my valentine?</h1>

    <section class="actions" id="actions">
      <button class="btn yes" id="yesBtn" type="button">Yes</button>
      <button class="btn no" id="noBtn" type="button">No</button>
    </section>

    <div class="hint" id="hint">tip: try clicking ‚ÄúNo‚Äù üòâ</div>

    <div class="confetti" id="confetti" style="display:none;"></div>
  </main>

  <script>
    // --- Name handling (edit here or use ?name=Alessia) ---
    const params = new URLSearchParams(location.search);
    const name = (params.get("name") || "Da bebi...").trim() || "Da bebi...";
    const questionEl = document.getElementById("question");
    questionEl.textContent = `${name.toLowerCase()} will you be my valentine?`;

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const actions = document.getElementById("actions");
    const hint = document.getElementById("hint");
    const card = document.getElementById("card");
    const confetti = document.getElementById("confetti");

    let yesScale = 1;

    function setYesScale(val){
      yesScale = Math.min(val, 6); // cap so it doesn‚Äôt go infinite
      yesBtn.style.setProperty("--yesScale", yesScale);
      yesBtn.style.fontSize = `${14 + (yesScale-1)*3}px`;
      yesBtn.style.padding = `${10 + (yesScale-1)*2}px ${18 + (yesScale-1)*6}px`;
    }
    setYesScale(1);

    // Move "No" to a random spot within the actions area
    function dodgeNo(){
      const pad = 8;
      const box = actions.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();

      const maxX = box.width - btn.width - pad;
      const maxY = box.height - btn.height - pad;

      const x = Math.max(pad, Math.random() * maxX);
      const y = Math.max(pad, Math.random() * maxY);

      noBtn.style.left = `${x}px`;
      noBtn.style.top  = `${y}px`;
      noBtn.style.right = "auto";
      noBtn.style.transform = "none";
      noBtn.style.position = "absolute";
    }

    // Grow yes whenever no is clicked/hovered (like the video effect)
    function punishNo(){
      setYesScale(yesScale * 1.28);
      dodgeNo();
      hint.textContent = "nice try üòá";
    }

    // Make it dodgy on hover (feels like the original)
    noBtn.addEventListener("mouseenter", dodgeNo);
    noBtn.addEventListener("click", punishNo);

    // Optional: also dodge on focus (keyboard)
    noBtn.addEventListener("focus", dodgeNo);

    // Confetti generator
    function launchConfetti(){
      confetti.innerHTML = "";
      confetti.style.display = "block";
      const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#c77dff","#f72585"];
      const count = 90;

      for(let i=0;i<count;i++){
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = `${Math.random()*100}%`;
        p.style.background = colors[Math.floor(Math.random()*colors.length)];
        p.style.animationDuration = `${1.2 + Math.random()*1.6}s`;
        p.style.animationDelay = `${Math.random()*0.25}s`;
        p.style.width = `${6 + Math.random()*10}px`;
        p.style.height = `${8 + Math.random()*14}px`;
        confetti.appendChild(p);
      }

      // remove later
      setTimeout(()=>{ confetti.style.display="none"; confetti.innerHTML=""; }, 2600);
    }

    // Success screen
    yesBtn.addEventListener("click", () => {
      card.classList.add("on");
      card.classList.add("sparkleDots");
      card.classList.add("on");

      launchConfetti();

      // Replace content similar to the video (YAY + gif)
      const gifUrl =
        "https://cdn.discordapp.com/attachments/916264933325410344/1455929423978037288/200.gif?ex=69800ab0&is=697eb930&hm=582f2ee041580f32ee3d029fb25d3ce0f29d7b609b4c23e8c3c59500174910b5"; // swap if you want

      card.innerHTML = `
        <div class="bearWrap" aria-hidden="true" style="margin-bottom:8px;">
          <svg width="88" height="64" viewBox="0 0 220 160" fill="none">
            <path d="M185 40c-10-18-35-18-45 0-10-18-35-18-45 0-12 22 16 46 45 66 29-20 57-44 45-66Z"
                  fill="#ff4d6d" opacity=".95"/>
            <circle cx="95" cy="86" r="54" fill="#f4b183"/>
            <circle cx="55" cy="60" r="18" fill="#f4b183"/>
            <circle cx="135" cy="60" r="18" fill="#f4b183"/>
            <circle cx="80" cy="84" r="6" fill="#222"/>
            <circle cx="110" cy="84" r="6" fill="#222"/>
            <circle cx="95" cy="102" r="9" fill="#e78aa0" opacity=".95"/>
          </svg>
        </div>

        <h1 class="title" style="margin-bottom:6px;">${name.toLowerCase()} will you be my valentine?</h1>
        <div class="successTitle">YAY! üéâ</div>
        <img class="gif" alt="celebration gif" src="${gifUrl}">
        <div class="hint">you made my day üíó</div>
        <div class="confetti" id="confetti"></div>
      `;

      // re-launch confetti in the new DOM
      const newConfetti = card.querySelector("#confetti");
      (function launch(){
        newConfetti.innerHTML = "";
        const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#c77dff","#f72585"];
        for(let i=0;i<90;i++){
          const p = document.createElement("div");
          p.className = "piece";
          p.style.left = `${Math.random()*100}%`;
          p.style.background = colors[Math.floor(Math.random()*colors.length)];
          p.style.animationDuration = `${1.2 + Math.random()*1.6}s`;
          p.style.animationDelay = `${Math.random()*0.25}s`;
          p.style.width = `${6 + Math.random()*10}px`;
          p.style.height = `${8 + Math.random()*14}px`;
          newConfetti.appendChild(p);
        }
        setTimeout(()=>{ newConfetti.innerHTML=""; }, 2600);
      })();
    });
  </script>
</body>
</html>
